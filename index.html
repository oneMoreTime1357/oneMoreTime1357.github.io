<!DOCTYPE html>
<html lang="en">
  <head>
    
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />









  <link rel="alternate" href="/atom.xml" title="A-Dan">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2.2.x" />



<link rel="canonical" href="http://yikeshu.info/"/>


<meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="A-Dan">
<meta property="og:url" content="http://yikeshu.info/index.html">
<meta property="og:site_name" content="A-Dan">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="A-Dan">
<meta name="twitter:description">


<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.2.x" />



  <link rel="stylesheet" type="text/css" href="/lib/fancybox/jquery.fancybox.css" />





<script type="text/javascript">
  var themeConfig = {
    search: {
      enable: true,
      path: "/search.xml",
    },
    navbar: {
      enable: true
    },
    fancybox: {
      enable: true
    },
    toc: {
      enable: true
    },
  };
</script>



  
  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?6e8f77ff0f6551f1a8df34de6cb8f662";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




    <title> A-Dan </title>
  </head>

  <body>
    <div class="container">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">A-Dan</a>
</div>

<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        <li class="menu-item">
          <a class="menu-item-link" href="/">
            
            
              Home
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/archives/">
            
            
              Archives
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/tags">
            
            
              Tags
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/categories">
            
            
              Categories
            
          </a>
        </li>
      
      
        <li class="menu-search">
          <form>
            <i class="iconfont icon-search" id="open-search"></i>
            <input type="text" class="search-input" id="search-input" />
            <i class="iconfont icon-close" id="close-search"></i>
          </form>
        </li>
      
    </ul>
  
</nav>

<div class="mobile-navbar">
  <div class="mobile-header">
    <div class="mobile-header-logo">
      <a href="/." class="logo">A-Dan</a>
    </div>

    <div class="mobile-header-icon">
      <span></span>
      <span></span>
      <span></span>
    </div>
  </div>
  <nav class="mobile-menu">
    
      <a class="mobile-menu-item" href="/">
        
        
          Home
        
      </a>
    
      <a class="mobile-menu-item" href="/archives/">
        
        
          Archives
        
      </a>
    
      <a class="mobile-menu-item" href="/tags">
        
        
          Tags
        
      </a>
    
      <a class="mobile-menu-item" href="/categories">
        
        
          Categories
        
      </a>
    
  </nav>
</div>
      </header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content">
            
  <section id="posts" class="posts">
    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2017/08/11/解决Chrome不能播放mp4视频的问题和HLS视频播放/">数据存储 NSUserDefaults</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          Aug 11, 2017
        </span>
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        

        
          <p>现在面临一个问题chrome中播放后缀名为.mp4的视频文件只有声音播放不出视频画面，上网查了一下才知道，MP4视频不是说后缀名以.mp4结尾的就是MP4视频，mp4视频还包括不同的编码格式，还有不同的扩展名，都可以统一定义成MP4文件，而chrome只支持标准的H.264方式的编码，所以如果视频编码格式不对，chrome还是加载不出来的。</p>
<p>想要查看视频的编码格式，最简单查看视频信息的方式是，在文件中选中视频点击右键查看简介或者详细信息，下面有一个栏信息是编解码器：标准的编码格式是H.264，如果不是这种格式，那很抱歉chrome加载不出来是正常的。</p>
<p>为什么chrome只支持H264这种格式呢，而不支持所有的视频编码格式？查了一下大概是说，绝大部分的视频编码格式都是要付专利费的，Google已经买了H264编码格式，所以其他的就不买了，Firefox没有Google那么有钱不愿意买。不过它使用Flash，绝大部分的视频格式基本上可以通过Flash播放。</p>
<p>而我司解决办法是，将MP4视频文件转码统一转成hls格式编码的视频，这种格式的视频后缀名是以.m3u8结尾的。</p>
<h4 id="什么是HLS？"><a href="#什么是HLS？" class="headerlink" title="什么是HLS？"></a>什么是HLS？</h4><p>HTTP Live Streaming（简称HLS）是一个基于HTTP的视频流协议，由苹果公司实现，</p>
<p>HTTP流媒体直播(HLS)是一种基于HTTP的媒体流媒体通信协议，由苹果公司实施，作为QuickTime、Safari、OS X和iOS软件的一部分。它的工作原理是将整个流程分解成一个小的基于http的文件下载序列，每个下载都加载了一个完整的潜在无界传输流的一小块。</p>
<h4 id="什么m3u8"><a href="#什么m3u8" class="headerlink" title="什么m3u8"></a>什么m3u8</h4><p>先说说M3U，M3U是一种播放多媒体列表的文件格式，它的设计初衷是为了播放音频文件比如MP3,但是越来越多的软件现在用来播放视频文件列表，M3U也是可以指定在线留媒体音频源。很多播放器和软件都支持M3U文件格式。</p>
<p>M3U8是Unicode版本的M3U，用UTF-8编码。’M3U’和M3U8‘文件都是苹果公司使用的HTTP Live Streaming格式的基础，这种格式可以在iPhone和Macbook等设备播放。</p>
<h4 id="平台支持情况"><a href="#平台支持情况" class="headerlink" title="平台支持情况"></a>平台支持情况</h4><p>苹果的产品都能很好的支持，iPhone、Safari，但是在chrome和Firefox还有一些其他未知的浏览器不支持播放这种视频格式。</p>
<p>So，想要播放这种格式的视频，前端这块还要做一层处理，不过不用担心，已经有人帮我们造好轮子了，Github上有很好的库可以支持这种视频格式的播放，<a href="https://github.com/videojs/video.js" target="_blank" rel="external">VideoJs</a>,<a href="https://github.com/videojs/videojs-contrib-hls" target="_blank" rel="external">videojs-contrib-hls</a><br>集成起来也非常的简单，github上都给了一些示例。</p>
<ul>
<li>快速集成开发<br>在<code>head</code>头中引入如下的CDN，需要引入videojs的样式，是为了使用播放器的样式，要不然播放器会很难看。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;link href=&quot;//vjs.zencdn.net/5.19/video-js.min.css&quot; rel=&quot;stylesheet&quot;&gt;</span><br><span class="line">&lt;script src=&quot;//vjs.zencdn.net/5.19/video.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script src=&quot;//cdnjs.cloudflare.com/ajax/libs/videojs-contrib-hls/5.8.3/videojs-contrib-hls.min.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;video id=&quot;video-play&quot; class=&quot;video-js vjs-default-skin&quot;</span><br><span class="line">      style=&quot;width: 600px; height: 400px;&quot;</span><br><span class="line">      playsinline webkit-playsinline</span><br><span class="line">      controls preload=&quot;auto&quot;</span><br><span class="line">      x-webkit-airplay=&quot;true&quot; controlsList=&quot;nodownload&quot; oncontextmenu=&quot;return false&quot;&gt;</span><br><span class="line">      &lt;source src=&quot;http://devimages.apple.com/iphone/samples/bipbop/bipbopall.m3u8&quot; type=&quot;application/x-mpegURL&quot;&gt;</span><br><span class="line">    &lt;/video&gt;</span><br><span class="line">    &lt;button&gt;播放&lt;/button&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    var el = document.getElementById(&quot;play-btn&quot;)</span><br><span class="line">    el.addEventListener(&apos;click&apos;, function () &#123;</span><br><span class="line">        window.videojs(&apos;video-play&apos;, &#123;&#125;, function onPlayerReady () &#123;</span><br><span class="line">         this.play()</span><br><span class="line">         this.on(&apos;ended&apos;, function () &#123;</span><br><span class="line">             console.log(&apos;ended, video js&apos;)</span><br><span class="line">         &#125;)</span><br><span class="line">       &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h4 id="扩展："><a href="#扩展：" class="headerlink" title="扩展："></a>扩展：</h4><ul>
<li>MP4视频编码格式有哪几种<br>MP4视频格式包括：MPEG-4 SP(Simple Profile/简单类)/ASP(Advanced Simple Profile/高级简单类)：xvid, divx5, 3ivx,ffmpeg/ffdshow, NeroDigital ASP…及MPEG-4 AVC/H.264：x264, NeroDigital AVC, Apple…还有MPEG-2, MPEG-1（不含Divx3/M$ MPEG4, WM9, RV9或VP6）.-</li>
</ul>
<hr>
<p>参考链接：<br>Mp4编码全介绍：<a href="https://my.oschina.net/alphajay/blog/4276" target="_blank" rel="external">https://my.oschina.net/alphajay/blog/4276</a><br><a href="http://www.jianshu.com/p/52c569efbfc0" target="_blank" rel="external">http://www.jianshu.com/p/52c569efbfc0</a><br><a href="https://imququ.com/post/html5-live-player-1.html" target="_blank" rel="external">https://imququ.com/post/html5-live-player-1.html</a><br><a href="http://yanhaijing.com/html/2016/03/12/html5-video/" target="_blank" rel="external">http://yanhaijing.com/html/2016/03/12/html5-video/</a></p>

        
      
    </div>

    

    
  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2017/07/01/jobInitiative/">职场主动</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          Jul 1, 2017
        </span>
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        
          
        

        
          <p>最近喜欢看美国的一个真人秀节目—《学徒》，《学徒》是美国全国广播公司出品的一档职场创业型真人秀节目，这档节目的制作人是纽约的地产大亨唐纳德•特朗普（DonaldTrump）也就是现在的美国总统，他从全美21万多志愿者中选择16名学徒候选人加入比赛，这些被选拔出的选手们则要为了获得特朗普旗下的一个商业项目的经营机会而展开竞争。这个节目04年的时候开始播出，第一季一播出就风靡了全美国，连续四个月位居收视冠军宝座，平均家庭收视数位2070万，最高家庭收视数达4010万，成为五年来18——49岁成年任收视率最高的节目。我也是出于对特朗普的好奇，才开始看这期节目。</p>
<p>这两天刚看了第二季的第一集，所有征集来的参赛者将面临第一次竞争，首先将男生和女生各分成一组，两组展开竞争，这一次稍有点不同，按照男女分好组之后，要求男生组选出一个人去当女生队的队长，女生队选出一个人去当男生队的队长，说实话选出一个人比较难，去到任何一队都会很艰难，同性别的人很好交流，首先性别相同就很容易找到共同话题，而在当时的环境下，大家相处紧紧只有几个小时，要选出一个人去当他们的队长，还要去管理他们，如果我是身处在女性团队中的一个人，我是不愿意站出来说，我去他们组，真的这很艰难。但他们但凡被挑选出来一定有很强的能力，也是一群聪明人，商讨了一下，每一队都有人主动站出来，主动去担当其他队的队长，这是一个好机会，也是一个不小的挑战，如果失败就会面临被开除的风险。<br>
          <div class="read-more">
            <a href="/2017/07/01/jobInitiative/" class="read-more-link">Read more..</a>
          </div>
        
      
    </div>

    

    
  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2017/05/10/从编程中我学到了什么/">从编程中我学到了什么</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          May 10, 2017
        </span>
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        
          
        

        
          <p>首先先介绍一下自己，我是一名程序员目前做的是前端开发的工作。本科学的是软件工程，没有脱离本专业的领域，用一句话来说就是科班出身的程序员。但我并不是什么很聪明的人，也不是从一开始就能很顺利的学好，决定以后工作就做编程这件事情。</p>
<p>记得刚上大一的时候，刚开始接触编程，学的第一门语言是C语言，每次上课都感觉自己像听天书一样，老师在上面讲的什么完全听不懂，当时就觉得编程好难啊，心想以后肯定不会做程序员，而且我们班的大部分女性同胞都有一个这样的认识，觉得女生不适合做程序员，总是玩命加班、熬夜了，总之印象不好，当时都认为就算现在学的是这个专业，以后还会计划着去做其他的事情，虽然当时和她们达成了共识，但我心里一直觉得编程是一件很酷的事情，而且很羡慕会编程的人，能做出自己想做的东西。就这样浑浑噩噩的过了大一，直到大二开始学习新语言JAVA，由于很喜欢教这门课的老师，老师教的也很有趣，所以也愿意跟着老师的步伐一步一步的来，从做一些简单的小demo开始，虽然刚开始还是什么都不懂，但有教程跟着一步步来，在不断调试试错之后，程序运行成功的那一刻，觉得很有意思也很有成就感，慢慢发现了编程的乐趣，自己也能写一些简单的小东西出来。当你对一个世界很好奇，而现在有人给你打开一条门缝，让你可以透过门缝窥探那个神奇的世界，你就会知道这有多兴奋，我也一直很好奇编程的世界，在大二时编程的初体验算是对我决定做一个程序员的萌芽阶段。<br>
          <div class="read-more">
            <a href="/2017/05/10/从编程中我学到了什么/" class="read-more-link">Read more..</a>
          </div>
        
      
    </div>

    

    
  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2017/03/05/小白健身第一周/">小白健身第一周</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          Mar 5, 2017
        </span>
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        
          
        

        
          <p>三月不减肥，五月徒伤悲。夏天来了，开始甩掉身上多余的赘肉，减肥！减肥！。正好附近有个健身房，办了张健身卡开始我的健身甩脂运动吧！</p>
<h4 id="制定健身计划"><a href="#制定健身计划" class="headerlink" title="制定健身计划"></a>制定健身计划</h4><p>对于小白的我第一次去健身房看到那么多器械完全是一脸懵逼的状态，到底要从哪里开始呢，这个器械要怎么操作锻炼的部位是哪里呢，完全一脸懵逼什么都不懂。没办法没钱请私教只能自己从网上找资料做笔记，根据自己的时间来安排制定健身计划。keep上有一个健身房入门女生版，看了几遍视频决定就先从这些简单的固定器械开始练习吧。<br>
          <div class="read-more">
            <a href="/2017/03/05/小白健身第一周/" class="read-more-link">Read more..</a>
          </div>
        
      
    </div>

    

    
  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2017/02/18/oneDay/">oneDay</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          Feb 18, 2017
        </span>
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        

        
          <blockquote>
<p> 一日就是一生<br>                 —–（日）酒井雄哉</p>
<p>修行的每天早上，我都穿着草鞋出去。上山10公里之后，接着走10公里较平坦的路，最后是10公里的下坡路，如此这般每天重复。结束一天的登山行程后，草鞋往往变形、穿烂，隔天得穿上新鞋才行。<br>     日复一日地不断重复。有一天，我发现草鞋就像我自己。当脱掉草鞋的那一刻，今天的自己既以告终。然后，为了明天的重生而认真反省。这么一来，便能获得新生，重新出发。今天的自己，今天就结束，明天将诞生一个全新的自己。<br>     一日就是一生。</p>
</blockquote>
<p>  对于我们普通人来说，今天或许和昨天没有什么不同，每一天都在重复昨天做过的事情，生活对我们大多数人来说就是不断的重复昨天。有时会疲倦，有时也会茫然，但生活还得继续，不会因为你的小情绪，而迁就着你。身边的环境是不会改变的，唯一能改变的就是自己，努力去发现生活中的美，时刻反省自身，不断提醒自己过去的已经过去，每一日都是一个全新的自己，当你用全新的眼光观察世界，会发现每一天，每一个人都不同。五月来了，今天早上去上班意外的发现小区栅栏上的蔷薇开了，黄色的，红色的，粉色的，甚是好看，才发现每天匆匆忙忙的脚步一直往前走，竟然错过了这份美景，错过了一份好心情(<em>^__^</em>) </p>

        
      
    </div>

    

    
  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2017/02/18/三体读书笔记/">三体读书笔记</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          Feb 18, 2017
        </span>
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        
          
        

        
          <p>自从买了kindle 读的第一本书就是三体，身边好多人都说很好看，由于很好奇想看看它到底有多好看，结果一看就无法自拔，被它深深的吸引。由于平常上班还有别的事情要做，唯一能够支配的时间就是上下班路上了，每天只能在地铁上看一会，一直看了一个多月吧，才把三部看完。这个故事很长，但真的很精彩.</p>
<p>故事从我们现在的生活开始，到发现外星文明的入侵，人类如何应对，再到整个宇宙。仿佛就是我们身边发生的事情，距离我们并不遥远。第一步中出现的三体游戏，必须穿上V装备才能玩，V装具可以模拟游戏场景中的环境，比如在游戏中是很热的天气，你也可以感受到热量，如果很冷你也能感受到很冷，确实是一个很棒的体验，我们现在也有VR技术，只能通过带上眼镜才能看到虚拟场景，还处于初步阶段，没准以后技术成熟，也会开发出三体小说中的V装具，更真实的体验游戏世界。<br>
          <div class="read-more">
            <a href="/2017/02/18/三体读书笔记/" class="read-more-link">Read more..</a>
          </div>
        
      
    </div>

    

    
  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2017/02/18/nsuserdefaults/">数据存储 NSUserDefaults</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          Feb 18, 2017
        </span>
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        

        
          <h2 id="NSUserDefaults"><a href="#NSUserDefaults" class="headerlink" title="NSUserDefaults"></a>NSUserDefaults</h2><ul>
<li>用户轻量级的<br>NSUserDefaults对象是用来保存，恢复应用程序相关的偏好设置，配置数据等等。默认系统允许应用程序自定义它的行为去迎合用户的喜好。你可以在程序运行的时候从用户默认的数据库中读取程序的设置。同时NSUserDefaults的缓存避免了在每次读取数据时候都打开用户默认数据库的操作。可以通过调用synchronize方法来使内存中的缓存与用户默认系统进行同步。</li>
</ul>
<ul>
<li>存数据<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">		<span class="comment">//获取NSUserDefaults 对象</span></span><br><span class="line"><span class="built_in">NSUserDefaults</span> *userDefaults = [<span class="built_in">NSUserDefaults</span> standardUserDefaults];</span><br><span class="line">      <span class="comment">// 存数据，不需要设置路径，NSUserDefaults 将数据保存在preferrences目录下</span></span><br><span class="line">[userDefaults setObject:<span class="string">@"Jane"</span> forKey:<span class="string">@"name"</span>];</span><br><span class="line">[userDefaults setObject:<span class="string">@"phone"</span> forKey:<span class="string">@"1892233232"</span>];</span><br><span class="line">    	<span class="comment">// 立刻保存同步数据，（如果不写这句话，会在将来某个时间点将数据保存在preference目录下）</span></span><br><span class="line">[userDefaults synchronize];</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p>取数据</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">		<span class="comment">//获取NSUserDefaults对象</span></span><br><span class="line"><span class="built_in">NSUserDefaults</span> *userDefaults = [<span class="built_in">NSUserDefaults</span> standardUserDefaults];</span><br><span class="line">   		 <span class="comment">//读取数据</span></span><br><span class="line"><span class="built_in">NSString</span> *userName  = [userDefaults objectForKey:<span class="string">@"name"</span>];</span><br><span class="line"><span class="built_in">NSString</span> *userPhone  = [userDefaults objectForKey:<span class="string">@"phone"</span>];</span><br></pre></td></tr></table></figure>
</li>
<li><p>判断一个数据是否存储在NSUserDefaults 中</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> ([userDefaults objectForKey:<span class="string">@"Kite"</span>] == <span class="literal">nil</span>) &#123;</span><br><span class="line">    nslog(<span class="string">@"没有存储Kite用户这个数据"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>如果存储 key 相同，value 不同的数据，后面的数据会把前面的数据替换掉。 </p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> 		<span class="comment">//执行完这行代码，文件中存储的数据就是现在的心value</span></span><br><span class="line">[[<span class="built_in">NSUserDefaults</span> standardUserDefaults] setObject:<span class="string">@"phone"</span> forKey:<span class="string">@"1877230212"</span>];</span><br><span class="line">[userDefaults synchronize];</span><br></pre></td></tr></table></figure>
</li>
</ul>

        
      
    </div>

    

    
  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2017/02/18/CollectionView_dragMove/">CollectionView 拖拽移动</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          Feb 18, 2017
        </span>
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        
          
        

        
          <h3 id="iOS9新特性，collectionView的退拽"><a href="#iOS9新特性，collectionView的退拽" class="headerlink" title="iOS9新特性，collectionView的退拽"></a>iOS9新特性，collectionView的退拽</h3><ul>
<li>创建collectionView，实现代理方法和Datasource，向collectionView 添加长按事件，如下这是我创建collectionView，注册的cell。</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">UICollectionView</span> *)collectionView &#123;</span><br><span class="line">	<span class="keyword">if</span>(_collectionView == <span class="literal">nil</span>) &#123;</span><br><span class="line">        <span class="built_in">UICollectionViewFlowLayout</span> *flowLayout = [[<span class="built_in">UICollectionViewFlowLayout</span> alloc] init];</span><br><span class="line">        flowLayout.itemSize = <span class="built_in">CGSizeMake</span>(<span class="number">45</span>, <span class="number">45</span>);</span><br><span class="line">        flowLayout.minimumLineSpacing = <span class="number">10</span>;</span><br><span class="line">        flowLayout.minimumInteritemSpacing = <span class="number">10</span>;</span><br><span class="line">        flowLayout.sectionInset = <span class="built_in">UIEdgeInsetsMake</span>(<span class="number">15</span>, <span class="number">15</span>, <span class="number">15</span>, <span class="number">15</span>);</span><br><span class="line">        _collectionView = [[<span class="built_in">UICollectionView</span> alloc] initWithFrame:<span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">0</span>, KScreenWidth, KScreenHeight) collectionViewLayout:flowLayout];</span><br><span class="line">        _collectionView.delegate = <span class="keyword">self</span>;</span><br><span class="line">        _collectionView.dataSource = <span class="keyword">self</span>;</span><br><span class="line">        _collectionView.backgroundColor = [<span class="built_in">UIColor</span> whiteColor];</span><br><span class="line">        [_collectionView registerClass:[MoveCollectionViewCell class] forCellWithReuseIdentifier:identity];</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">UILongPressGestureRecognizer</span> *longPressGesture = [[<span class="built_in">UILongPressGestureRecognizer</span> alloc] initWithTarget:<span class="keyword">self</span> action:<span class="keyword">@selector</span>(longPressAction:)];</span><br><span class="line">        [_collectionView addGestureRecognizer:longPressGesture];</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">	<span class="keyword">return</span> _collectionView;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>实现datasource ，加入数据源，</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">NSInteger</span>)collectionView:(<span class="built_in">UICollectionView</span> *)collectionView numberOfItemsInSection:(<span class="built_in">NSInteger</span>)section &#123;</span><br><span class="line">    <span class="keyword">return</span> _data.count;</span><br><span class="line">&#125;</span><br><span class="line">	</span><br><span class="line">- (<span class="built_in">UICollectionViewCell</span> *)collectionView:(<span class="built_in">UICollectionView</span> *)collectionView cellForItemAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath &#123;</span><br><span class="line">    MoveCollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:identity forIndexPath:indexPath];</span><br><span class="line">    cell.img = _data[indexPath.row];</span><br><span class="line">    <span class="keyword">return</span> cell;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>下面使用iOS9的新特性实现拖拽，必须实现下面的方法
          <div class="read-more">
            <a href="/2017/02/18/CollectionView_dragMove/" class="read-more-link">Read more..</a>
          </div>
        
      
    </div>

    

    
  </article>

    
  </section>

  
  <nav class="pagination">
    
    
  </nav>


          </div>
          
        </div>  
      </main>

      <footer id="footer" class="footer">

  <div class="social-links">
    
      
        
          <a href="mailto:yangdan1357@gmail.com" class="iconfont icon-email" title="email"></a>
        
      
    
      
    
      
    
      
    
      
    
      
    
      
        
          <a href="https://github.com/oneMoreTime1357" class="iconfont icon-github" title="github"></a>
        
      
    
      
    
      
    
    
    
  </div>


<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://hexo.io/">Hexo</a>
  </span>
  
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/ahonn/hexo-theme-even">Even</a>
  </span>

  <span class="copyright-year">
    
    &copy; 
     
      2016 - 
    
    2017

    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">A-Dan</span>
  </span>
</div>
      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>

    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"6280987357357278000"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>



    
  





  
    <script type="text/javascript" src="/lib/jquery/jquery-3.1.1.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/fancybox/jquery.fancybox.pack.js"></script>
  

    <script type="text/javascript" src="/js/src/even.js?v=2.2.x"></script>
<script type="text/javascript" src="/js/src/bootstrap.js?v=2.2.x"></script>

  </body>
</html>